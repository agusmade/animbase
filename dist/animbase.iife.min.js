var AnimBase=function(){"use strict";const t=t=>t.match(/^([\w]{2})([\w]{2})([\w]{2})([\w]{2})$/).slice(1).map((t=>parseInt(t,16))),e=t=>{const e=t.match(/^#(?:([0-f]{3})|([0-f]{4})|([0-f]{6})|([0-f]{8}))$/);if(!e)throw Error("Unsupported color format");const[,n,a,o,i]=e;return n?n.split("").map((t=>t+t)).join("")+"ff":a?a.split("").map((t=>t+t)).join(""):o?o+"ff":i},n={linear:t=>t,ease:t=>t*t*(3-2*t),in:t=>t*t*t,out:t=>1-Math.pow(1-t,3),inOut:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,inQuad:t=>t*t,outQuad:t=>t*(2-t),inOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,inCubic:t=>t*t*t,outCubic:t=>--t*t*t+1,inOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,inQuart:t=>t*t*t*t,outQuart:t=>1- --t*t*t*t,inOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,inQuint:t=>t*t*t*t*t,outQuint:t=>1+--t*t*t*t*t,inOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,inSine:t=>1-Math.cos(t*Math.PI/2),outSine:t=>Math.sin(t*Math.PI/2),inOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,inExpo:t=>0===t?0:Math.pow(2,10*(t-1)),outExpo:t=>1===t?1:1-Math.pow(2,-10*t),inOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,10-20*t))/2,inCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),outCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),inOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,inBack:t=>2.70158*t*t*t-1.70158*t*t,outBack:t=>1+2.70158*--t*t*t+1.70158*t*t,inOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2,inElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin(2*(10*t-10.75)*Math.PI/3),outElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(2*(10*t-.75)*Math.PI/3)+1,inOutElastic:t=>0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin(2*(20*t-11.125)*Math.PI/4.5)/2:Math.pow(2,-20*t+10)*Math.sin(2*(20*t-11.125)*Math.PI/4.5)/2+1,inBounce:t=>1-n.outBounce(1-t),outBounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,inOutBounce:t=>t<.5?(1-n.outBounce(1-2*t))/2:(1+n.outBounce(2*t-1))/2,spring:(t,e=4.5,n=6)=>1-Math.cos(t*e*Math.PI)*Math.exp(-t*n)},a=(t,e,n,a,o)=>a+(t-e)*(o-a)/(n-e);let o={color:/#[0-f]{3,}/,number:/-?\d+(?:\.\d+)?/,unit:/[%a-zA-Z]*/,func:/[a-zA-Z]+/};o={...o,numberWithOptionalUnit:new RegExp(`(?:(${o.color.source})|(?:(${o.number.source})(${o.unit.source})?))`)},o={...o,numberWithOptionalUnitAndFunc:new RegExp(`${o.numberWithOptionalUnit.source}(?:\\.(${o.func.source}))?`)};const i=t=>{const e=RegExp(o.numberWithOptionalUnitAndFunc.source,"g");let a,i=[];for(;null!==(a=e.exec(t));){let[t,o,r,s,l]=a;if(l&&!n[l])throw Error(`Invalid easing function: ${l}`);i.push({type:o?"color":"number",text:t,value:o||parseFloat(r),unit:s,func:l,lastIndex:e.lastIndex})}return i};function r(t,e,n){let a=[...e].reverse(),o=[...n].reverse();for(let e=0;e<a.length;e++){const n=a[e].lastIndex-a[e].text.length,i=a[e].lastIndex;t=t.substring(0,n)+o[e]+t.substring(i)}return t}const s=({startValue:o,endValue:i,startFrame:r=0,endFrame:s,currentFrame:l,func:u="linear",type:c}={})=>{if(o===i)return o;let m=a(l,r,s,0,1);const h=n[u](m);return"color"===c?((n,a,o)=>{const i=t(e(a)),r=t(e(o));return"#"+i.map(((t,e)=>Math.round(Math.max(0,Math.min(255,t+(r[e]-t)*n))).toString(16).padStart(2,"0"))).join("")})(h,o,i):a(h,0,1,o,i)};class l{constructor(t,{init:e=null,config:n=null}={}){this.element=t,this.setConfig({init:e,config:n})}setConfig({init:t=null,config:e=null}={}){const n=this.element.dataset.animInit,a=this.element.dataset.animConfig;if(!t||!e){try{t=n?JSON.parse(n):{}}catch(t){console.debug(n),console.error(t)}try{e=a?JSON.parse(a):{}}catch(t){console.debug(a),console.error(t)}}this.rawInit=t,this.rawConfig=e;const o={};let r=0,s={},l={};for(let[e,n]of Object.entries(t))l[e]=i(n),s[e]=[...l[e]];for(let[t,n]of Object.entries(e)){if("0"===t)continue;const e=parseInt(t);o[t]={startFrame:r,endFrame:e,ref:s,props:{}};for(let[e,a]of Object.entries(n)){const n=i(a);s={...s,[e]:n},o[t].props[e]=n}r=e+1}this.initial=t,this.initialRef=l,this.styleConfig=o}update(t,e=!1){let n={};const a=Object.entries(this.styleConfig),o=a.find((([,e])=>t>=e.startFrame&&t<=e.endFrame));if(o){const a=o[1];for(let[o,i]of Object.entries(a.ref)){const l=a.props[o]?a.props[o].map(((e,n)=>`${s({startValue:i[n].value,endValue:e.value,startFrame:a.startFrame,endFrame:a.endFrame,currentFrame:t,func:e.func,type:e.type})}${e.unit||""}`)):i.map((t=>`${t.value}${t.unit||""}`)),u=r(this.initial[o],this.initialRef[o],l);e?n[o]=u:this.element.style[o]=u}}else{const t=a.at(-1)[1];for(let[a,o]of Object.entries(t.ref)){const i=t.props[a]?t.props[a].map((t=>`${t.value}${t.unit||""}`)):o.map((t=>`${t.value}${t.unit||""}`)),s=r(this.initial[a],this.initialRef[a],i);e?n[a]=s:this.element.style[a]=s}}return e?n:void 0}}class u{constructor(t,e={}){this.getTimelineValue=t,this.animatedElements=new Map,this.timelineValue=0,this.elementSelector=e.elementSelector||"[data-anim-config]",this.autoCollect=e.autoCollect??!0,this.autoUpdate=e.autoUpdate??!0,this.autoCollect&&this.collectAnimatedElements(),this.autoUpdate&&this.updateTimeline()}collectAnimatedElements(){document.querySelectorAll(this.elementSelector).forEach((t=>this.addElement(t)))}addElement(t,e={}){const n=t instanceof l?t:new l(t,e);this.animatedElements.set(n.element,n)}removeElement(t){this.animatedElements.delete(t)}updateTimeline(){this.timelineValue=this.getTimelineValue(),this.updateAllAnimatedElements()}updateAllAnimatedElements(){this.animatedElements.forEach((t=>t.update(this.timelineValue)))}}var c=Object.freeze({__proto__:null,AnimatedElement:l,TimelineAnimator:u,easingFunctions:n,linearInterpolation:a,parseExpression:i});const m=new Map;let h={};function f(t,e={}){let{configSelector:n,elementSelector:a,...o}=e;if(n){const t=document.querySelector(n);t?.dataset?.animTriggerConfig&&(o=JSON.parse(t.dataset.animTriggerConfig))}const i=o.max||100,r=1e3/(parseFloat(o.speed)||60)*i,s=o.autostart||!1;let l;return l=new u((()=>l?.state?.frame??(o.reverse?i:0)),a?{elementSelector:a}:{autoCollect:!1,autoUpdate:!1}),l.state={frame:0,max:i,duration:r,running:!1,startTime:0,pauseTime:0,once:o.once||!1,reverse:o.reverse||!1,onStart:o.onStart||null,onFinish:o.onFinish||null,from:null,to:null},m.set(t,l),s&&h.trigger(t),l}function p(t){const e=t.state,n=()=>{let a=(performance.now()-e.startTime)/e.duration;a=Math.max(0,Math.min(1,a));const o=(e.to??e.max)-(e.from??0);if(e.frame=Math.floor((e.from??0)+o*a),t.updateTimeline(),a>=1){if(e.once)return e.running=!1,void(e.onFinish&&e.onFinish());e.startTime=performance.now(),e.onFinish&&e.onFinish()}e.running&&requestAnimationFrame(n)};n()}["trigger","pause","resume","stop","seek","setOnce","setReverse","setHooks"].forEach((t=>{h[t]=function(e="default",n){const a=m.get(e);if(!a||!a.state)return;const o=a.state;switch(t){case"trigger":const t=n||{};if(!o.running){o.running=!0,"function"==typeof t.onStart&&(o.onStart=t.onStart),"function"==typeof t.onFinish&&(o.onFinish=t.onFinish),o.reverse=t.reverse??o.reverse,o.once=t.once??o.once,o.max=t.max??o.max,o.from="number"==typeof t.from?t.from:o.reverse?o.max:0,o.to="number"==typeof t.to?t.to:o.reverse?0:o.max,o.frame=o.from;const e=t.speed||(o.duration?1e3*Math.abs(o.to-o.from)/o.duration:60);o.duration=1e3/e*Math.abs(o.to-o.from),o.startTime=performance.now(),p(a)}break;case"pause":o.running=!1,o.pauseTime=performance.now();break;case"resume":const e=performance.now()-o.pauseTime;o.startTime+=e,o.running=!0,p(a);break;case"stop":o.running=!1,o.frame=o.reverse?o.max:0,a.updateTimeline();break;case"seek":o.frame=Math.max(0,Math.min(o.max,n||0)),a.updateTimeline();break;case"setOnce":o.once=!!n;break;case"setReverse":o.reverse=!!n;break;case"setHooks":const{onStart:i,onFinish:r}=n||{};i&&(o.onStart=i),r&&(o.onFinish=r)}}}));const d={scrollY:"scroll",scrollX:"scroll",value:"input",currentTime:"timeupdate"},g="data-anim-controller-ref",M="data-anim-controlled-by",w="data-anim-trigger-group",b="data-anim-trigger-config";function v(){const t=document.querySelectorAll(`[${g}], [${M}], [${w}], [data-anim-init]`);t.forEach((t=>{const e=t.dataset.animControllerRef;let n=t.dataset.animControlledBy;"scrollTop"===n||"scrollY"===n?(e||t.setAttribute(g,"window"),t.setAttribute(M,"scrollY")):"scrollLeft"===n||"scrollX"===n?(e||t.setAttribute(g,"window"),t.setAttribute(M,"scrollX")):e&&"window"!==e&&!n?t.setAttribute(M,"value"):e||t.dataset.animTriggerGroup||t.setAttribute(w,"default")})),t.forEach((t=>{const e=t.dataset.animControllerRef,n=t.dataset.animControlledBy,a=t.dataset.animListen;if(e||n){const t=e&&"window"!==e?document.querySelector(e):window;if(!t)return console.warn("Missing controller:",e);const o=`${e||"window"}:${n||"value"}`;if(!m.has(o)){const i=new u((()=>parseFloat(t[n||"value"]||0)),{elementSelector:`[${g}="${e||""}"][${M}="${n}"]`});m.set(o,i);const r=a||d[n||"value"]||"input";t.addEventListener(r,(()=>i.updateTimeline()))}}else if(t.dataset.animTriggerGroup){const e=t.dataset.animTriggerGroup;m.has(e)||f(e,{configSelector:`[${w}="${e}"][${b}]`,elementSelector:`[${w}="${e}"]:not([${b}])`})}else;}))}h.play=h.trigger,h.setProgress=h.seek,h.refresh=v,h.getAnimator=t=>m.get(t),h.createTimedAnimator=f,document.addEventListener("DOMContentLoaded",v);return{...c,...h}}();
